<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bol√£o Mundial Crazys - Apura√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos adicionais para uma melhor apar√™ncia */
        body {
            font-family: 'Inter', sans-serif;
        }
        .table-container {
            overflow-x: auto; /* Garante que a tabela seja rol√°vel em telas pequenas */
        }
        /* Estilo para o placar final e para os pontos, para melhor destaque */
        .placar-final-input {
            background-color: #4A5568; /* cinza mais escuro */
            color: #F7FAFC; /* texto branco */
            border: 1px solid #718096;
            border-radius: 0.375rem;
            width: 5rem; /* 80px */
            text-align: center;
            font-weight: bold;
            padding: 0.5rem;
        }
        .pontos-cell {
            font-weight: bold;
            font-size: 1.125rem; /* 18px */
            text-align: center;
            color: #68D391; /* verde claro */
        }
        .total-points {
            color: #F6E05E; /* amarelo */
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-200">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white">üî• Bol√£o Mundial Crazys üî•</h1>
            <p class="text-xl text-gray-400 mt-2">Apura√ß√£o em Tempo Real</p>
        </header>

        <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-semibold mb-3">Regras de Pontua√ß√£o</h2>
            <ul class="list-disc list-inside text-gray-300">
                <li><span class="font-bold text-green-400">3 pontos:</span> Acertar o placar exato do jogo.</li>
                <li><span class="font-bold text-yellow-400">1 ponto:</span> Acertar o resultado (vit√≥ria, empate ou derrota) com um placar diferente.</li>
                <li><span class="font-bold text-red-400">0 pontos:</span> Errar o resultado do jogo.</li>
            </ul>
        </div>

        <div class="table-container bg-gray-800 rounded-lg shadow-lg">
            <table class="min-w-full text-sm text-left">
                <thead class="bg-gray-700 text-xs text-gray-300 uppercase tracking-wider">
                    <tr>
                        <th scope="col" class="px-4 py-3">Grupo</th>
                        <th scope="col" class="px-4 py-3">Jogo</th>
                        <th scope="col" class="px-4 py-3">Hor√°rio</th>
                        <th scope="col" class="px-4 py-3 text-center">Placar Final</th>
                        <!-- Cabe√ßalhos dos participantes ser√£o gerados dinamicamente -->
                    </tr>
                </thead>
                <tbody id="bolao-table-body">
                    <!-- Linhas da tabela ser√£o geradas dinamicamente -->
                </tbody>
                <tfoot class="bg-gray-700 font-bold text-white">
                     <!-- Linha de totais ser√° gerada dinamicamente -->
                </tfoot>
            </table>
        </div>
    </div>

    <script>
        // --- BASE DE DADOS DOS PALPITES ---
        // Todos os dados est√£o aqui. Para adicionar um novo jogo ou participante, basta editar esta se√ß√£o.
        const participants = ["Galego", "ANDR√â", "ROBERTO", "IAGO", "YASSER", "Walber", "Kleiton", "Os√©as"];

        const games = [
            // Grupo A
            { grupo: 'A', jogo: 'Palmeiras x Al Ahly', horario: '13h', palpites: { Galego: "2x0", ANDR√â: "3x0", ROBERTO: "2x1", IAGO: "2x0", YASSER: "1x1", Walber: "2x0", Kleiton: "3x2", Os√©as: "2x0" } },
            { grupo: 'A', jogo: 'Inter Miami x Porto', horario: '16h', palpites: { Galego: "1x2", ANDR√â: "1x2", ROBERTO: "0x2", IAGO: "0x2", YASSER: "0x2", Walber: "0x2", Kleiton: "1x2", Os√©as: "1x2" } },
            // Grupo B
            { grupo: 'B', jogo: 'Seattle x Atl√©tico', horario: '19h', palpites: { Galego: "0x2", ANDR√â: "0x3", ROBERTO: "0x3", IAGO: "0x3", YASSER: "0x2", Walber: "0x3", Kleiton: "0x3", Os√©as: "0x2" } },
            { grupo: 'B', jogo: 'PSG x Botafogo', horario: '22h', palpites: { Galego: "4x1", ANDR√â: "3x1", ROBERTO: "5x0", IAGO: "4x1", YASSER: "4x0", Walber: "4x0", Kleiton: "2x1", Os√©as: "3x1" } },
            // Grupo C
            { grupo: 'C', jogo: 'Benfica x Auckland', horario: '13h', palpites: { Galego: "8x0", ANDR√â: "2x0", ROBERTO: "7x0", IAGO: "6x0", YASSER: "5x0", Walber: "6x0", Kleiton: "3x0", Os√©as: "5x0" } },
            { grupo: 'C', jogo: 'Bayern x Boca', horario: '22h', palpites: { Galego: "3x1", ANDR√â: "5x0", ROBERTO: "3x0", IAGO: "3x1", YASSER: "2x1", Walber: "4x0", Kleiton: "2x0", Os√©as: "4x0" } },
            // Grupo D
            { grupo: 'D', jogo: 'Flamengo x Chelsea', horario: '15h', palpites: { Galego: "1x1", ANDR√â: "1x3", ROBERTO: "1x3", IAGO: "2x0", YASSER: "2x1", Walber: "0x1", Kleiton: "1x2", Os√©as: "0x0" } },
            { grupo: 'D', jogo: 'LAFC x Esp√©rance', horario: '19h', palpites: { Galego: "1x0", ANDR√â: "2x0", ROBERTO: "1x0", IAGO: "0x0", YASSER: "1x1", Walber: "2x0", Kleiton: "1x0", Os√©as: "2x0" } },
            // Grupo E
            { grupo: 'E', jogo: 'Inter x Urawa Red', horario: '16h', palpites: { Galego: "2x0", ANDR√â: "3xP", ROBERTO: "2x0", IAGO: "4x0", YASSER: "3x0", Walber: "3x0", Kleiton: "4x1", Os√©as: "3x0" } },
            { grupo: 'E', jogo: 'River x Monterrey', horario: '22h', palpites: { Galego: "2x1", ANDR√â: "1x1", ROBERTO: "1x1", IAGO: "2x2", YASSER: "1x1", Walber: "2x1", Kleiton: "2x2", Os√©as: "2x1" } },
            // Grupo F
            { grupo: 'F', jogo: 'Sundows x Dortmund', horario: '13h', palpites: { Galego: "0x5", ANDR√â: "0x2", ROBERTO: "0x2", IAGO: "1x2", YASSER: "0x2", Walber: "1x2", Kleiton: "0x2", Os√©as: "0x3" } },
            { grupo: 'F', jogo: 'Fluminense x Ulsan', horario: '19h', palpites: { Galego: "3x1", ANDR√â: "2x0", ROBERTO: "3x1", IAGO: "2x0", YASSER: "2x0", Walber: "2x0", Kleiton: "2x0", Os√©as: "2x0" } },
            // Grupo G
            { grupo: 'G', jogo: 'Juventus x WAC', horario: '13h', palpites: { Galego: "3x1", ANDR√â: "4x1", ROBERTO: "3x0", IAGO: "3x0", YASSER: "3x1", Walber: "3x0", Kleiton: "2x1", Os√©as: "3x0" } },
            { grupo: 'G', jogo: 'Man City x Al-Ain', horario: '22h', palpites: { Galego: "6x0", ANDR√â: "5x0", ROBERTO: "4x0", IAGO: "5x0", YASSER: "5x0", Walber: "5x0", Kleiton: "4x0", Os√©as: "5x0" } },
            // Grupo H
            { grupo: 'H', jogo: 'Real Madrid x Pachuca', horario: '16h', palpites: { Galego: "3x0", ANDR√â: "4x0", ROBERTO: "4x1", IAGO: "3x0", YASSER: "3x1", Walber: "2x0", Kleiton: "3x0", Os√©as: "3x0" } },
            { grupo: 'H', jogo: 'RB Salzburg x Al Hilal', horario: '19h', palpites: { Galego: "1x2", ANDR√â: "2x1", ROBERTO: "1x2", IAGO: "1x2", YASSER: "1x2", Walber: "1x3", Kleiton: "1x1", Os√©as: "1x2" } },
        ];
        
        // --- FUN√á√ïES DE L√ìGICA DO PROGRAMA ---

        /**
         * Normaliza uma string de placar para o formato "GxG" (ex: "2x0").
         * Remove espa√ßos e substitui "a" ou "A" por "x".
         * @param {string} score - A string do placar a ser normalizada.
         * @returns {string} - O placar normalizado.
         */
        function normalizeScore(score) {
            if (typeof score !== 'string' || !score) return "";
            return score.replace(/\s/g, '').replace(/a/i, 'x');
        }

        /**
         * Extrai o resultado de um jogo (vit√≥ria do time da casa, vit√≥ria do visitante ou empate).
         * @param {string} score - O placar no formato "GxG".
         * @returns {number} - 1 para vit√≥ria da casa, -1 para vit√≥ria do visitante, 0 para empate.
         */
        function getGameResult(score) {
            try {
                const parts = score.split('x').map(Number);
                if (parts.length !== 2 || isNaN(parts[0]) || isNaN(parts[1])) {
                    return null; // Formato inv√°lido
                }
                return Math.sign(parts[0] - parts[1]);
            } catch (e) {
                return null;
            }
        }

        /**
         * Calcula os pontos para um determinado palpite com base no placar final.
         * @param {string} palpite - O palpite do participante.
         * @param {string} placarFinal - O placar final real do jogo.
         * @returns {number} - A pontua√ß√£o (3, 1, ou 0).
         */
        function calculatePoints(palpite, placarFinal) {
            const placarFinalNorm = normalizeScore(placarFinal);
            if (!placarFinalNorm || placarFinalNorm.indexOf('x') === -1) {
                return 0; // Se o placar final n√£o for v√°lido, n√£o h√° pontos.
            }
            
            const palpiteNorm = normalizeScore(palpite);
            if (!palpiteNorm || palpite.toUpperCase().includes('P')) {
                return 0; // Palpites inv√°lidos ou com "P" n√£o pontuam.
            }

            // 3 pontos para o placar exato
            if (palpiteNorm === placarFinalNorm) {
                return 3;
            }

            // 1 ponto para o resultado correto
            const resultadoPalpite = getGameResult(palpiteNorm);
            const resultadoFinal = getGameResult(placarFinalNorm);

            if (resultadoPalpite !== null && resultadoPalpite === resultadoFinal) {
                return 1;
            }
            
            // 0 pontos para o resto
            return 0;
        }

        /**
         * Atualiza todas as pontua√ß√µes na tabela com base nos valores dos campos de "Placar Final".
         */
        function updateAllScores() {
            const totals = participants.reduce((acc, name) => ({ ...acc, [name]: 0 }), {});

            games.forEach((game, index) => {
                const finalScoreInput = document.getElementById(`score-input-${index}`);
                const finalScore = finalScoreInput.value;

                participants.forEach(participant => {
                    const palpite = game.palpites[participant];
                    const points = calculatePoints(palpite, finalScore);
                    
                    const pointsCell = document.getElementById(`points-${participant.replace(/\s|√â/g, '')}-${index}`);
                    pointsCell.textContent = points;
                    
                    // Adiciona cor baseada na pontua√ß√£o
                    pointsCell.classList.remove('text-green-400', 'text-yellow-400', 'text-red-400');
                    if (points === 3) {
                        pointsCell.classList.add('text-green-400');
                    } else if (points === 1) {
                        pointsCell.classList.add('text-yellow-400');
                    } else {
                        pointsCell.classList.add('text-red-400');
                    }
                    
                    totals[participant] += points;
                });
            });

            // Atualiza a linha de totais no rodap√© da tabela
            participants.forEach(participant => {
                const totalCell = document.getElementById(`total-points-${participant.replace(/\s|√â/g, '')}`);
                totalCell.textContent = totals[participant];
            });
        }


        /**
         * Renderiza a tabela inteira (cabe√ßalho, corpo e rodap√©) com base nos dados.
         */
        function renderTable() {
            const thead = document.querySelector('thead tr');
            const tbody = document.getElementById('bolao-table-body');
            const tfoot = document.createElement('tr');
            tfoot.className = 'bg-gray-700 font-bold text-white text-lg';

            // 1. Renderiza o cabe√ßalho dos participantes
            participants.forEach(name => {
                const thPalpite = document.createElement('th');
                thPalpite.scope = 'col';
                thPalpite.className = 'px-4 py-3 text-center';
                thPalpite.textContent = name;
                thead.appendChild(thPalpite);

                const thPontos = document.createElement('th');
                thPontos.scope = 'col';
                thPontos.className = 'px-4 py-3 text-center bg-gray-600';
                thPontos.textContent = 'Pts';
                thead.appendChild(thPontos);
            });

            // 2. Renderiza as linhas dos jogos
            games.forEach((game, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-700 hover:bg-gray-600/50';

                row.innerHTML = `
                    <td class="px-4 py-3">${game.grupo}</td>
                    <td class="px-4 py-3 font-medium text-white">${game.jogo}</td>
                    <td class="px-4 py-3">${game.horario}</td>
                    <td class="px-4 py-3 text-center">
                        <input type="text" id="score-input-${index}" class="placar-final-input" oninput="updateAllScores()">
                    </td>
                `;

                participants.forEach(participant => {
                    const palpite = game.palpites[participant] || '-';
                    // Sanitiza o nome para usar como parte do ID
                    const sanitizedName = participant.replace(/\s|√â/g, '');

                    const palpiteCell = document.createElement('td');
                    palpiteCell.className = 'px-4 py-3 text-center font-mono';
                    palpiteCell.textContent = palpite;
                    row.appendChild(palpiteCell);

                    const pointsCell = document.createElement('td');
                    pointsCell.className = 'px-4 py-3 pontos-cell bg-gray-900/50';
                    pointsCell.id = `points-${sanitizedName}-${index}`;
                    pointsCell.textContent = '0';
                    row.appendChild(pointsCell);
                });

                tbody.appendChild(row);
            });

            // 3. Renderiza a linha de totais
            tfoot.innerHTML = `<td colspan="4" class="px-4 py-4 text-right uppercase tracking-wider">Pontua√ß√£o Total</td>`;
            participants.forEach(participant => {
                const sanitizedName = participant.replace(/\s|√â/g, '');
                const totalPalpiteCell = document.createElement('td');
                totalPalpiteCell.className = 'px-4 py-4';
                tfoot.appendChild(totalPalpiteCell);

                const totalPointsCell = document.createElement('td');
                totalPointsCell.className = 'px-4 py-4 text-center total-points text-2xl';
                totalPointsCell.id = `total-points-${sanitizedName}`;
                totalPointsCell.textContent = '0';
                tfoot.appendChild(totalPointsCell);
            });
            document.querySelector('table').appendChild(document.createElement('tfoot')).appendChild(tfoot);
        }

        // --- INICIALIZA√á√ÉO DO PROGRAMA ---
        // Garante que o script rode apenas depois que a p√°gina inteira for carregada.
        document.addEventListener('DOMContentLoaded', () => {
            renderTable();
        });
    </script>

</body>
</html>
